/dts-v1/;
/plugin/;

/ {
	fragment@0 {
		target-path = "/";
		__overlay__ {

			unipi_id: unipi-id {
				compatible = "unipi,unipi-id";
				nvmem = <&unipi_mb>;
				nvmem-names = "plcid0";
				id-channel = <&i2c1>;
			};

			bootcount0 {
				compatible = "u-boot,bootcount-rtc";
				rtc = <&rtc_i2c>;
				offset = <0x20>;
			};
		};
	};

	fragment@1 {
		target = <&i2c1>;

		__overlay__ {
			#address-cells = < 0x01 >;
			#size-cells = < 0x00 >;
			status = "okay";

			unipi_mb:24c01@57 {
				compatible = "atmel,24c01";
				reg = <0x57>;
				status = "okay";
			};

			rtc_i2c:mcp7940x@6f {
				compatible = "microchip,mcp7941x";
				reg = <0x6f>;
				status = "okay";
			};
		};
	};

	fragment@2 {
		target = <&spi6_cs_pins>;
		__overlay__ {
			brcm,pins = <18>, <23>, <19>, <20>, <21> ;
			brcm,function = <0>, <1>, <0>, <1>, <1>; // output input
			brcm,pull = <1>, <0>, <0>, <0>, <0>;
		};
	};

	fragment@3 {
		target = <&spi6>;
		__overlay__ {
			#address-cells = <1>;
			#size-cells = <0>;
			compatible = "spi-gpio";
			pinctrl-names = "default";
			pinctrl-0 = <&spi6_cs_pins>;
			gpio-sck = <&gpio 21 0>;
			gpio-mosi = <&gpio 20 0>;
			gpio-miso = <&gpio 19 0>;
			cs-gpios = <&gpio 23 1>;
			spi-delay-us = <0>;
			status = "okay";

			tpm_spi: tpm-spi@1 {
				compatible = "infineon,slb9670", "tis,tpm2-spi", "tcg,tpm_tis-spi";
				reg = <1>;
				#address-cells = <1>;
				#size-cells = <0>;
				status = "okay";
			};
		};
	};
};
